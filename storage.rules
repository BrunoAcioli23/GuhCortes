// ============================================
// REGRAS DE SEGURANÇA DO STORAGE
// ============================================
// Copie e cole estas regras no Firebase Console > Storage > Rules

rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    
    // ============================================
    // PASTA: logos
    // Logos das barbearias
    // Formato do arquivo: {userId}_{timestamp}.{extensao}
    // ============================================
    match /logos/{fileName} {
      // Qualquer pessoa pode ler (visualizar) as logos
      allow read: if true;
      
      // Apenas usuários autenticados podem fazer upload
      // Com validações de segurança:
      // - Tamanho máximo: 2MB
      // - Tipo: apenas imagens (JPG, PNG, GIF, WebP)
      allow write: if request.auth != null 
        && request.resource.size < 2 * 1024 * 1024
        && request.resource.contentType.matches('image/.*');
      
      // Permitir deletar apenas se autenticado
      allow delete: if request.auth != null;
    }
  }
}

// ============================================
// COMO APLICAR ESTAS REGRAS:
// ============================================
// 1. Acesse Firebase Console (https://console.firebase.google.com/)
// 2. Selecione seu projeto
// 3. No menu lateral, clique em "Storage"
// 4. Clique na aba "Regras" (Rules)
// 5. Copie e cole todo o conteúdo acima
// 6. Clique em "Publicar" (Publish)
//
// IMPORTANTE: Teste suas regras antes de publicar!
