// ============================================
// REGRAS TEMPORÁRIAS PARA MIGRAÇÃO
// ⚠️ USE APENAS DURANTE A MIGRAÇÃO!
// ⚠️ DEPOIS VOLTE PARA firestore.rules
// ============================================

rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // ============================================
    // COLLECTION: barbearias
    // ============================================
    match /barbearias/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
      
      match /servicos/{servicoId} {
        allow read, write: if request.auth != null && request.auth.uid == userId;
      }
      
      match /produtos/{produtoId} {
        allow read, write: if request.auth != null && request.auth.uid == userId;
      }
    }
    
    // ============================================
    // COLLECTION: atendimentos
    // ⚠️ PERMISSÕES ABERTAS PARA MIGRAÇÃO
    // ============================================
    match /atendimentos/{atendimentoId} {
      // TEMPORÁRIO: Permitir tudo para usuários autenticados
      allow read, write, delete: if request.auth != null;
    }
  }
}

// ============================================
// INSTRUÇÕES:
// ============================================
// 1. Copie e cole no Firebase Console > Firestore > Rules
// 2. Publique
// 3. Execute a migração (migrar-dados.html)
// 4. DEPOIS DA MIGRAÇÃO, volte para firestore.rules (IMPORTANTE!)
